{"version":3,"file":"load-more.min.js","names":["loadMoreButton","document","getElementById","addEventListener","e","preventDefault","currentPage","parseInt","getAttribute","postsLoaded","maxPosts","xhr","XMLHttpRequest","open","ppdData","ajax_url","setRequestHeader","onreadystatechange","this","readyState","status","tempDiv","createElement","innerHTML","responseText","postTeasers","querySelectorAll","container","querySelector","forEach","teaser","appendChild","length","setAttribute","style","display","send"],"sources":["load-more.js"],"mappings":"CAAA,WACI,MAAMA,EAAiBC,SAASC,eAAe,mBAC3CF,GACAA,EAAeG,iBAAiB,QAAS,SAAUC,GACnDA,EAAEC,iBAGF,IAAIC,EAAcC,SAASP,EAAeQ,aAAa,cACnDC,EAAcF,SAASP,EAAeQ,aAAa,sBACvD,MAAME,EAAWH,SAASP,EAAeQ,aAAa,mBAGhDG,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQC,QAAQC,UAAU,GACnCJ,EAAIK,iBAAiB,eAAgB,qCAErCL,EAAIM,mBAAqB,WACrB,GAAwB,IAApBC,KAAKC,YAAoC,MAAhBD,KAAKE,OAAgB,CAElD,MAAMC,EAAUpB,SAASqB,cAAc,OACvCD,EAAQE,UAAYL,KAAKM,aAGzB,MAAMC,EAAcJ,EAAQK,iBAAiB,gBACvCC,EAAY1B,SAAS2B,cAAc,iBACzCH,EAAYI,QAAQ,SAASC,GACzBH,EAAUI,YAAYD,EAC1B,GAGAxB,IACAG,GAAegB,EAAYO,OAC3BhC,EAAeiC,aAAa,YAAa3B,GACzCN,EAAeiC,aAAa,oBAAqBxB,IAG7CA,GAAeC,GAAmC,IAAvBe,EAAYO,UACvChC,EAAekC,MAAMC,QAAU,OAEnC,CACJ,EAGAxB,EAAIyB,KAAK,uCAAyC9B,EAClD,EAEP,CA9CD","ignoreList":[],"sourcesContent":["(function () {\n    const loadMoreButton = document.getElementById('show-more-posts');\n    if (loadMoreButton) {\n        loadMoreButton.addEventListener('click', function (e) {\n        e.preventDefault();\n        \n        // Retrieve data attributes from the button\n        let currentPage = parseInt(loadMoreButton.getAttribute(\"data-page\"));\n        let postsLoaded = parseInt(loadMoreButton.getAttribute(\"data-posts-loaded\"));\n        const maxPosts = parseInt(loadMoreButton.getAttribute(\"data-max-posts\"));\n        \n        // Prepare the AJAX request\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", ppdData.ajax_url, true);  // assuming load-more.js uses ppdData as localized object\n        xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n        xhr.onreadystatechange = function () {\n            if (this.readyState === 4 && this.status === 200) {\n            // Create a temporary element to hold the response HTML\n            const tempDiv = document.createElement(\"div\");\n            tempDiv.innerHTML = this.responseText;\n            \n            // Append each new post teaser to the .post-teasers container\n            const postTeasers = tempDiv.querySelectorAll('.post-teaser');\n            const container = document.querySelector('.post-teasers');\n            postTeasers.forEach(function(teaser) {\n                container.appendChild(teaser);\n            });\n            \n            // Update the page and postsLoaded counters\n            currentPage++;\n            postsLoaded += postTeasers.length;\n            loadMoreButton.setAttribute(\"data-page\", currentPage);\n            loadMoreButton.setAttribute(\"data-posts-loaded\", postsLoaded);\n            \n            // Hide the button if we've loaded all posts\n            if (postsLoaded >= maxPosts || postTeasers.length === 0) {\n                loadMoreButton.style.display = 'none';\n            }\n            }\n        };\n\n        // Send AJAX request with current_page parameter. (Add &category=XYZ if needed)\n        xhr.send('action=load_more_posts&current_page=' + currentPage);\n        });\n    }\n})();  "]}